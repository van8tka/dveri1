@model dveri1.Models.ForMainModel
@{
    ViewBag.Title = "Входные двери";
}


    <!-- Непосредственный код слайдера -->
<div id="slider">
     <div id="mask">
        <ul id="image_container">
            @foreach (string i in Model.FileName)
            {
                <li><img src="~/Content/MainSlider/@i" style="width:1200px;height:195px"></li>
            }
        </ul>
    </div>
    <img src="~/Content/ControlSlider/glass.png"  id="glass" style="width:1200px;height:200px"/>
    @*переключатель слайдов*@
       @*<div id="encart">
      
        <ul id="dots">
            @for (int i = 1; i <= Model.CountFile; i++)
            {
                <li class="button-@i" onClick="changeImage(@i)"></li>
            }
           
        </ul>
    </div>*@
      <img src="~/Content/ControlSlider/fleche-gauche.png" id="fleche_gauche" class="fleche" onClick="prevImage()" />
    <img src="~/Content/ControlSlider/fleche-droite.png" id="fleche_droite" class="fleche" onClick="nextImage()" />
   </div>
<div class="productlist">
    @Html.Partial("ProductList")
</div>

<div class="pager">
    @Html.PageLinks(Model.PagingInfo, x => Url.Action("Index", new { page = x, PageSize = Model.PagingInfo.ItemsPerPage }))
</div>

<script type="text/javascript">
  
        jQuery(function($) {
            $('.td').click(function(e) {      
                e.preventDefault();
                //console.log(e.target.getAttribute('value') );
                var url = $(this).attr('href');
                $('.productlist').load(url);
                @*$.ajax(
                    {    
                        data: e.target.getAttribute('value'),
                        url: '@Url.Action("Index", "Home", new {page =  data})',                  
                        success: function(data) {
                            $('.productlist').html(data);
                        }
                    });*@
            })
        })
	
</script>


    <script>
        var secDuration = 4;
        var image = 1;
        var maxImages = @Model.CountFile;
        var slider = document.getElementById('slider');
        var timeout
        var flag=false;

        function changeImage(requiredImage) {

            if (!requiredImage && requiredImage != 0)
            {

                if(image < maxImages && !flag)
                {
                    image++;
                }
                else
                {
                    if(image==maxImages)
                    {
                        flag=true;
                        image--;
                    }
                    else
                        if(flag)
                        {
                            image--;
                            if(image==1)
                            {flag=false;}
                        }

                }
            }
            else
            {
                if(requiredImage > maxImages)
                {
                    image = 1;
                }
                else
                    if(requiredImage < 1)
                    {
                        image = maxImages;
                    }
                    else
                    {
                        image = requiredImage;
                    }
            }
            slider.className = "image"+image;
            clearTimeout(timeout)
            timeout = setTimeout("changeImage()",secDuration*1000);
        }
        function nextImage(){
            changeImage(image+1);
        }
        function prevImage(){
            changeImage(image-1);
        }
        changeImage(1);
    </script>
